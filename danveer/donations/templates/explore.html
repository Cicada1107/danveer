{% extends 'main.html' %}
{% load static %}
{% block content %}

<!--Donation Showcase Section-->
<div class="showcase-section text-center">
    <h2>Recent Donations</h2>
    <hr style="margin-top: 10px; margin-bottom: 10px;">
    <div class="container">
        {% for donation in resolved_donations %}
        <div class="row">
            <div class="card col-lg-3" style="width: 10rem;">
                <img class="card-img-top" src="{{donation.item.img.url}}" alt="Card image cap">
                <div class="card-body">
                    <p class="card-text">{{donation.donor}} donated {{donation.item}} to {{donation.beneficiary}}<br></p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<hr style="margin-top: 10px; margin-bottom: 10px;">
<!--Map Section-->


<!--DonatedItem/DonationRequest cards Section-->
<div class="feed-section feed-cards text-center">
    {% if user.user_type == 'beneficiary' %}
    <h2>Unclaimed Donations Available</h2>
    <hr style="margin-top: 10px; margin-bottom: 10px;">
    <div class="container">
        {% for item in unclaimed_donated_items %}
        <div class="row">
            <div class="col-lg-3 card" style="width: 10rem;">
                <img class="card-img-top" src="{{item.img.url}}" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">{{item.item_description}}</h5>
                    <p class="card-text">Quantity: {{item.quantity}} units</p>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">Donor: {{item.donor.first_name}} {{item.donor.last_name}} (@{{item.donor.username}})</li>
                    <li class="list-group-item">Location: {{item.donor.location}}</li>
                    <li class="list-group-item">Time: {{item.date}}</li>
                </ul>
                <div class="card-body">
                    <a href="#" class="card-link">Claim</a>
                    <!--when this is clicked, this should become the email.id of the donor and the current user should get an alert saying you have successfully claimed the Donation or a chat instance between them should begin. Then this should become a Donation object in the backend.-->
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <hr style="margin-top: 10px; margin-bottom: 10px;">
    {% elif user.user_type == 'donor' %}
    <h2>Donation Requests</h2>
    <hr style="margin-top: 10px; margin-bottom: 10px;">
    <div class="container">
        {% for d_request in unreceived_donation_requests %}
        <div class="row">
            <div class="col-lg-3 card" style="width: 18rem;">
                <img class="card-img-top" src="{{d_request.img.url}}" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">{{d_request.item_description}}</h5>
                    <p class="card-text">Quantity: {{d_request.quantity}} units</p>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">Beneficiary: {{d_request.beneficiary.first_name}} {{d_request.beneficiary.last_name}} (@{{d_request.beneficiary}})</li>
                    <li class="list-group-item">Location: {{d_request.beneficiary.location}}</li>
                    <li class="list-group-item">Time: {{d_request.date}}</li>
                </ul>
                <div class="card-body">
                    <a href="#" class="card-link">Pledge Donation</a>
                    <!--when this is clicked, this should become the email.id of the beneficiary and the current user should get an alert saying you have successfully accepted the donation request. Then this should become a Donation object in the backend.-->
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <hr style="margin-top: 10px; margin-bottom: 10px;">
    {% endif %}
</div>

{% endblock %}